@model IEnumerable<PayrollSoft.Models.Employee>

@{
    ViewBag.Title = "Create";
}

<script type="text/javascript" src="@Url.Content("~/Scripts/jqwidgets/jqxtabs.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jqwidgets/jqxcheckbox.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jqwidgets/jqxlistbox.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jqwidgets/jqxtabs.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jqwidgets/jqxgrid.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jqwidgets/jqxgrid.sort.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jqwidgets/jqxgrid.pager.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jqwidgets/jqxgrid.selection.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jqwidgets/jqxgrid.edit.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jqwidgets/jqxdata.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jqwidgets/jqxnumberinput.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jqwidgets/jqxinput.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jqwidgets/jqxdropdownlist.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jqwidgets/jqxexpander.js")"></script>
<script src="@Url.Content("~/Scripts/jquery_lib/implement-ui-widget-1.0.js")" type="text/javascript"></script>
<script type="text/javascript">

  function _createFormElements(title, theme, dataAdapter, _deptdataAdapter, _gradesdataAdapter) {
        //dropDownListDataSource
         /*$('#window').jqxWindow({
            theme: theme,
            resizable: true,
            width: 615,
            height: 350,
            minWidth: 590,
            minHeight: 385,
            title: title,
            draggable:false,
            initContent: function () {*/

                var genders = ["Male", "Female"];
                var dept = ["IT01", "Fin01"];
                var grade = ["A-1", "B-1"];
                var jobtitle = ["Human Resources Manager", "Information Technology Officer", "Financial Controller", "CEO"];

                $('#jqxTabs').jqxTabs({ height: 230, width: 580, theme: theme });
                $("#empID").jqxInput({ theme: theme, width: '230px', height: '25px' });
                //$("#empID1").jqxInput({ theme: theme, width: '200px', height: '25px' });
                $("#name").jqxInput({ theme: theme, width: '230px', height: '25px' });
                $("#address").jqxInput({ theme: theme, width: '230px', height: '25px' });
                $("#contactNo").jqxInput({ theme: theme, width: '230px', height: '25px' });
                //$("#dob").jqxDateTimeInput({ theme: theme, width: '250px', height: '20px' });
                $("#onPayroll").jqxCheckBox({ theme: theme, width: '185px', checked: true });
                $("#onMedicalScheme").jqxCheckBox({ theme: theme, width: '185px', checked: true });
                $("#Pension").jqxCheckBox({ theme: theme, width: '185px', checked: true });
                $("#MedSchemContribAmount").jqxNumberInput({ width: '180px', height: '25px', spinButtons: true, theme: theme });
                $("#overtimeHours").jqxNumberInput({ width: '180px', height: '25px', spinButtons: true, theme: theme });
                $("#advanceLoan").jqxNumberInput({ width: '180px', height: '25px', spinButtons: true, theme: theme });

                $("#sex").jqxDropDownList({
                    theme: theme, source: genders,
                    selectedIndex: -1, width: '200px', height: '20px',
                    promptText: "Gender...", dropDownHeight: "50px"
                });

                $("#deptno").jqxDropDownList({
                    theme: theme, source: _deptdataAdapter,
                    selectedIndex: -1, width: '230px', height: '20px',
                    promptText: "Department...", dropDownHeight: "80px",
                    displayMember: "DeptName", valueMember: "DeptID"
                });

                $("#empgrade").jqxDropDownList({
                    theme: theme, source: _gradesdataAdapter,
                    selectedIndex: -1, width: '230px', height: '20px',
                    promptText: "Grade...", dropDownHeight: "80px",
                    displayMember: "GradeName", valueMember: "GradeId"
                });

                $("#onPayroll").on('change', function (event) {
                    //var onPayroll = event.args.checked;
                    _glOnPayroll = event.args.checked;
                });

                $("#dateHired").jqxDateTimeInput({ theme: theme, width: '250px', height: '20px', formatString: 'dd-MM-yyyy' });
                $("#enddate").jqxDateTimeInput({ theme: theme, width: '250px', height: '20px', formatString: 'dd-MM-yyyy' });
                $("#dob").jqxDateTimeInput({ theme: theme, width: '250px', height: '20px', formatString: 'dd-MM-yyyy' });

                $("#jobposition").jqxDropDownList({
                    theme: theme, source: jobtitle,
                    selectedIndex: -1, width: '230px', height: '20px',
                    promptText: "Job Title...", dropDownHeight: "110px"
                });


                /* $("#Save").jqxButton({ theme: theme });
                $("#Cancel").jqxButton({ theme: theme });

                $("#jqxgrid").jqxGrid({
                width: 580,
                source: dataAdapter,
                theme: theme,
                pageable: true,
                autoheight: true,
                sortable: true,
                selectionmode: 'none',
                columns: [
                { text: 'Employee Name', datafield: 'EmpName', width: 150 },
                { text: 'Employee ID', datafield: 'EmpID', width: 80 },
                { text: 'Dept', datafield: 'DeptID', width: 80 },
                { text: 'Grade', datafield: 'GradeID', width: 80 },
                { text: 'Hire Date', datafield: 'HireDate', width: 158 },
                { text: 'Date of Birth', datafield: 'DateOfBirth', width: 158 },
                { text: 'Job Title', datafield: 'JobTitle', width: 158 },
                { text: 'Gender', datafield: 'Gender', width: 55 },
                { text: 'Mobile', datafield: 'MobileNumber', width: 45 }

                ]

                });*/
           //}
      //});

       //$('#window').jqxWindow('focus');
   }

 /*  var windowContent = (function ($) {

       var createWidgets = function () {


           var genders = ["Male", "Female"];
           var dept = ["IT01", "Fin01"];
           var grade = ["A-1", "B-1"];
           var jobtitle = ["Human Resources Manager", "Information Technology Officer", "Financial Controller", "CEO"];

           $('#jqxTabs').jqxTabs({ height: 230, width: 580, theme: theme });
           $("#empID").jqxInput({ theme: theme, width: '230px', height: '25px' });
           //$("#empID1").jqxInput({ theme: theme, width: '200px', height: '25px' });
           $("#name").jqxInput({ theme: theme, width: '230px', height: '25px' });
           $("#address").jqxInput({ theme: theme, width: '230px', height: '25px' });
           $("#contactNo").jqxInput({ theme: theme, width: '230px', height: '25px' });
           //$("#dob").jqxDateTimeInput({ theme: theme, width: '250px', height: '20px' });
           $("#onPayroll").jqxCheckBox({ theme: theme, width: '185px', checked: true });
           $("#onMedicalScheme").jqxCheckBox({ theme: theme, width: '185px', checked: true });
           $("#Pension").jqxCheckBox({ theme: theme, width: '185px', checked: true });
           $("#MedSchemContribAmount").jqxNumberInput({ width: '180px', height: '25px', spinButtons: true, theme: theme });
           $("#overtimeHours").jqxNumberInput({ width: '180px', height: '25px', spinButtons: true, theme: theme });
           $("#advanceLoan").jqxNumberInput({ width: '180px', height: '25px', spinButtons: true, theme: theme });

           $("#sex").jqxDropDownList({
               theme: theme, source: genders,
               selectedIndex: -1, width: '200px', height: '20px',
               promptText: "Gender...", dropDownHeight: "50px"
           });

           $("#deptname").jqxDropDownList({
               theme: theme, source: _deptdataAdapter,
               selectedIndex: -1, width: '230px', height: '20px',
               promptText: "Department...", dropDownHeight: "80px",
               displayMember: "DeptName", valueMember: "DeptID"
           });

           $("#empgrade").jqxDropDownList({
               theme: theme, source: _gradesdataAdapter,
               selectedIndex: -1, width: '230px', height: '20px',
               promptText: "Grade...", dropDownHeight: "80px",
               displayMember: "GradeName", valueMember: "GradeId"
           });

           $("#onPayroll").on('change', function (event) {
               //var onPayroll = event.args.checked;
               _glOnPayroll = event.args.checked;
           });

           $("#dateHired").jqxDateTimeInput({ theme: theme, width: '250px', height: '20px', formatString: 'dd-MM-yyyy' });
           $("#enddate").jqxDateTimeInput({ theme: theme, width: '250px', height: '20px', formatString: 'dd-MM-yyyy' });
           $("#dob").jqxDateTimeInput({ theme: theme, width: '250px', height: '20px', formatString: 'dd-MM-yyyy' });

           $("#jobposition").jqxDropDownList({
               theme: theme, source: jobtitle,
               selectedIndex: -1, width: '230px', height: '20px',
               promptText: "Job Title...", dropDownHeight: "110px"
           });


           $("#Save").jqxButton({ theme: theme });
           $("#Cancel").jqxButton({ theme: theme });

       };

       var eventListeners = function () {

           $("#onPayroll").on('change', function (event) {
               var onPayroll = event.args.checked;
           });
       };

       return {
           init: function () {
               createWidgets();
               eventListeners();
           }
       };

   } (jQuery));*/


    function _addRecord(row) {

        $.ajax({
            cache: false,
            datatype: "jsonp",
            url: "/Employee/Create",
            type: "POST",
            data: row,
            success: function (data, status, xhr) {
                // alert(status);
                // $("#jqxgrid").jqxGrid('updatebounddata'); //Refresh the grid to reflect the changes made

                _notificationMessage("success", "Record Saved Successfully!"); //Notify the user

            },
            error: function (jqXHR, textStatus, errorThrown) {
                alert(errorThrown);
                //commit(false);
            }



        });


    }

    $(document).ready(function () {

        _glcontroller = "Employee";
        var theme = getDemoTheme();
        var title = 'Create Employee';
        var url = '/Employee/GetEmployees';
        var source = {
            datatype: "json",
            datafields: [
                               { name: 'EmpName', type: 'string' },
                               { name: 'EmpID', type: 'string' },
                               { name: 'DeptID', type: 'string' },
                               { name: 'GradeID', type: 'string' },
                               { name: 'Gender', type: 'string' },
                               { name: 'HireDate', type: 'date' },
                               { name: 'DateOfBirth', type: 'date' },
                               { name: 'JobTitle', type: 'string' },
                               { name: 'MobileNumber', type: 'string' }
                          ],
            id: 'EmpID',
            url: url

        };

        var datasource = {
            datatype: "json",
            datafields: [
                                { name: 'DeptID', type: 'string' },
                                { name: 'DeptName', type: 'string' }
                    ],
            id: 'DeptID',
            url: '/Employee/GetDepartments'
        }
        var gradesdatasource = { datatype: "json", datafields: [{ name: 'GradeId', type: 'string'}], id: 'GradeId', url: '/EmployeeGrade/GetGrades' };

        var dataAdapter = new $.jqx.dataAdapter(source);

        //the second dataAdapter is populated with departments
        var _deptdataAdapter = new $.jqx.dataAdapter(datasource);

        //the third data source is populated with gradeID's from the grades table
        var _gradesdataAdapter = new $.jqx.dataAdapter(gradesdatasource);

        _createFormElements(title, theme, dataAdapter, _deptdataAdapter, _gradesdataAdapter);

       // $("#Save").click(function () {

           // _createNewEmployee(onPayroll); //Call the method to create a new Employee record in the database...

      //  });

    });

</script>


      @Html.Partial("_addNewEmployee")